#!/bin/bash

# get the IP address or domain name from the command line argument
ip_or_domain="flaws.cloud"

# run nslookup on the IP address or domain name and extract the IP addresses returned
ip_addresses=$(nslookup $ip_or_domain | grep -oP 'Address: \K[^\n]+')

# loop through each IP address returned and run nslookup on it
for ip_address in $ip_addresses
do
    echo "Running nslookup on $ip_address..."
    # run nslookup on the ip addresses which were returned from the first one and print out the response we get
    nslookup $ip_address | awk '/^Address: /{print "    "$2}'
done
